<!DOCTYPE html>
<!-- saved from url=(0046)https://kaiiiz.github.io/hexo-theme-book-demo/ -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
        <link rel="icon" href="../../static/favicon.png">
        <title>49  数据完整性（上）：硬件坏了怎么办？.md</title>
        <!-- Spectre.css framework -->
        <link rel="stylesheet" href="../../static/index.css">
        <!-- theme css & js -->
        <meta name="generator" content="Hexo 4.2.0">
    </head>

<body>

<div class="book-container">
    <div class="book-sidebar">
        <div class="book-brand">
            <a href="../../index.html">
                <img src="../../static/favicon.png">
                <span>技术文章摘抄</span>
            </a>
        </div>
        <div class="book-menu uncollapsible">
            <ul class="uncollapsible">
                <li><a href="../../index.html" class="current-tab">首页</a></li>
            </ul>

            <ul class="uncollapsible">
                <li><a href="../index.html">上一级</a></li>
            </ul>

            <ul class="uncollapsible">
                <li>

                    
                    <a href="00%20%E5%BC%80%E7%AF%87%E8%AF%8D%20%20%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%A0%E9%9C%80%E8%A6%81%E5%AD%A6%E4%B9%A0%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%EF%BC%9F.md.html">00 开篇词  为什么你需要学习计算机组成原理？.md</a>

                </li>
                <li>

                    
                    <a href="01%20%20%E5%86%AF%C2%B7%E8%AF%BA%E4%BE%9D%E6%9B%BC%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%EF%BC%9A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E7%9A%84%E9%87%91%E5%AD%97%E5%A1%94.md.html">01  冯·诺依曼体系结构：计算机组成的金字塔.md</a>

                </li>
                <li>

                    
                    <a href="02%20%20%E7%BB%99%E4%BD%A0%E4%B8%80%E5%BC%A0%E7%9F%A5%E8%AF%86%E5%9C%B0%E5%9B%BE%EF%BC%8C%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%BA%94%E8%AF%A5%E8%BF%99%E4%B9%88%E5%AD%A6.md.html">02  给你一张知识地图，计算机组成原理应该这么学.md</a>

                </li>
                <li>

                    
                    <a href="03%20%20%E9%80%9A%E8%BF%87%E4%BD%A0%E7%9A%84CPU%E4%B8%BB%E9%A2%91%EF%BC%8C%E6%88%91%E4%BB%AC%E6%9D%A5%E8%B0%88%E8%B0%88%E2%80%9C%E6%80%A7%E8%83%BD%E2%80%9D%E7%A9%B6%E7%AB%9F%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F.md.html">03  通过你的CPU主频，我们来谈谈“性能”究竟是什么？.md</a>

                </li>
                <li>

                    
                    <a href="04%20%20%E7%A9%BF%E8%B6%8A%E5%8A%9F%E8%80%97%E5%A2%99%EF%BC%8C%E6%88%91%E4%BB%AC%E8%AF%A5%E4%BB%8E%E5%93%AA%E4%BA%9B%E6%96%B9%E9%9D%A2%E6%8F%90%E5%8D%87%E2%80%9C%E6%80%A7%E8%83%BD%E2%80%9D%EF%BC%9F.md.html">04  穿越功耗墙，我们该从哪些方面提升“性能”？.md</a>

                </li>
                <li>

                    
                    <a href="05%20%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%8C%87%E4%BB%A4%EF%BC%9A%E8%AE%A9%E6%88%91%E4%BB%AC%E8%AF%95%E8%AF%95%E7%94%A8%E7%BA%B8%E5%B8%A6%E7%BC%96%E7%A8%8B.md.html">05  计算机指令：让我们试试用纸带编程.md</a>

                </li>
                <li>

                    
                    <a href="06%20%20%E6%8C%87%E4%BB%A4%E8%B7%B3%E8%BD%AC%EF%BC%9A%E5%8E%9F%E6%9D%A5if...else%E5%B0%B1%E6%98%AFgoto.md.html">06  指令跳转：原来if...else就是goto.md</a>

                </li>
                <li>

                    
                    <a href="07%20%20%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BC%9A%E5%8F%91%E7%94%9Fstack%20overflow%EF%BC%9F.md.html">07  函数调用：为什么会发生stack overflow？.md</a>

                </li>
                <li>

                    
                    <a href="08%20%20ELF%E5%92%8C%E9%9D%99%E6%80%81%E9%93%BE%E6%8E%A5%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E7%A8%8B%E5%BA%8F%E6%97%A0%E6%B3%95%E5%90%8C%E6%97%B6%E5%9C%A8Linux%E5%92%8CWindows%E4%B8%8B%E8%BF%90%E8%A1%8C%EF%BC%9F.md.html">08  ELF和静态链接：为什么程序无法同时在Linux和Windows下运行？.md</a>

                </li>
                <li>

                    
                    <a href="09%20%20%E7%A8%8B%E5%BA%8F%E8%A3%85%E8%BD%BD%EF%BC%9A%E2%80%9C640K%E5%86%85%E5%AD%98%E2%80%9D%E7%9C%9F%E7%9A%84%E4%B8%8D%E5%A4%9F%E7%94%A8%E4%B9%88%EF%BC%9F.md.html">09  程序装载：“640K内存”真的不够用么？.md</a>

                </li>
                <li>

                    
                    <a href="10%20%20%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5%EF%BC%9A%E7%A8%8B%E5%BA%8F%E5%86%85%E9%83%A8%E7%9A%84%E2%80%9C%E5%85%B1%E4%BA%AB%E5%8D%95%E8%BD%A6%E2%80%9D.md.html">10  动态链接：程序内部的“共享单车”.md</a>

                </li>
                <li>

                    
                    <a href="11%20%20%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%BC%96%E7%A0%81%EF%BC%9A%E2%80%9C%E6%89%8B%E6%8C%81%E4%B8%A4%E6%8A%8A%E9%94%9F%E6%96%A4%E6%8B%B7%EF%BC%8C%E5%8F%A3%E4%B8%AD%E7%96%BE%E5%91%BC%E7%83%AB%E7%83%AB%E7%83%AB%E2%80%9D%EF%BC%9F.md.html">11  二进制编码：“手持两把锟斤拷，口中疾呼烫烫烫”？.md</a>

                </li>
                <li>

                    
                    <a href="12%20%20%E7%90%86%E8%A7%A3%E7%94%B5%E8%B7%AF%EF%BC%9A%E4%BB%8E%E7%94%B5%E6%8A%A5%E6%9C%BA%E5%88%B0%E9%97%A8%E7%94%B5%E8%B7%AF%EF%BC%8C%E6%88%91%E4%BB%AC%E5%A6%82%E4%BD%95%E5%81%9A%E5%88%B0%E2%80%9C%E5%8D%83%E9%87%8C%E4%BC%A0%E4%BF%A1%E2%80%9D%EF%BC%9F.md.html">12  理解电路：从电报机到门电路，我们如何做到“千里传信”？.md</a>

                </li>
                <li>

                    
                    <a href="13%20%20%E5%8A%A0%E6%B3%95%E5%99%A8%EF%BC%9A%E5%A6%82%E4%BD%95%E5%83%8F%E6%90%AD%E4%B9%90%E9%AB%98%E4%B8%80%E6%A0%B7%E6%90%AD%E7%94%B5%E8%B7%AF%EF%BC%88%E4%B8%8A%EF%BC%89%EF%BC%9F.md.html">13  加法器：如何像搭乐高一样搭电路（上）？.md</a>

                </li>
                <li>

                    
                    <a href="14%20%20%E4%B9%98%E6%B3%95%E5%99%A8%EF%BC%9A%E5%A6%82%E4%BD%95%E5%83%8F%E6%90%AD%E4%B9%90%E9%AB%98%E4%B8%80%E6%A0%B7%E6%90%AD%E7%94%B5%E8%B7%AF%EF%BC%88%E4%B8%8B%EF%BC%89%EF%BC%9F.md.html">14  乘法器：如何像搭乐高一样搭电路（下）？.md</a>

                </li>
                <li>

                    
                    <a href="15%20%20%E6%B5%AE%E7%82%B9%E6%95%B0%E5%92%8C%E5%AE%9A%E7%82%B9%E6%95%B0%EF%BC%88%E4%B8%8A%EF%BC%89%EF%BC%9A%E6%80%8E%E4%B9%88%E7%94%A8%E6%9C%89%E9%99%90%E7%9A%84Bit%E8%A1%A8%E7%A4%BA%E5%B0%BD%E5%8F%AF%E8%83%BD%E5%A4%9A%E7%9A%84%E4%BF%A1%E6%81%AF%EF%BC%9F.md.html">15  浮点数和定点数（上）：怎么用有限的Bit表示尽可能多的信息？.md</a>

                </li>
                <li>

                    
                    <a href="16%20%20%E6%B5%AE%E7%82%B9%E6%95%B0%E5%92%8C%E5%AE%9A%E7%82%B9%E6%95%B0%EF%BC%88%E4%B8%8B%EF%BC%89%EF%BC%9A%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E6%B5%AE%E7%82%B9%E6%95%B0%E5%88%B0%E5%BA%95%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F.md.html">16  浮点数和定点数（下）：深入理解浮点数到底有什么用？.md</a>

                </li>
                <li>

                    
                    <a href="17%20%20%E5%BB%BA%E7%AB%8B%E6%95%B0%E6%8D%AE%E9%80%9A%E8%B7%AF%EF%BC%88%E4%B8%8A%EF%BC%89%EF%BC%9A%E6%8C%87%E4%BB%A4%E5%8A%A0%E8%BF%90%E7%AE%97=CPU.md.html">17  建立数据通路（上）：指令加运算=CPU.md</a>

                </li>
                <li>

                    
                    <a href="18%20%20%E5%BB%BA%E7%AB%8B%E6%95%B0%E6%8D%AE%E9%80%9A%E8%B7%AF%EF%BC%88%E4%B8%AD%EF%BC%89%EF%BC%9A%E6%8C%87%E4%BB%A4%E5%8A%A0%E8%BF%90%E7%AE%97=CPU.md.html">18  建立数据通路（中）：指令加运算=CPU.md</a>

                </li>
                <li>

                    
                    <a href="19%20%20%E5%BB%BA%E7%AB%8B%E6%95%B0%E6%8D%AE%E9%80%9A%E8%B7%AF%EF%BC%88%E4%B8%8B%EF%BC%89%EF%BC%9A%E6%8C%87%E4%BB%A4%E5%8A%A0%E8%BF%90%E7%AE%97=CPU.md.html">19  建立数据通路（下）：指令加运算=CPU.md</a>

                </li>
                <li>

                    
                    <a href="20%20%20%E9%9D%A2%E5%90%91%E6%B5%81%E6%B0%B4%E7%BA%BF%E7%9A%84%E6%8C%87%E4%BB%A4%E8%AE%BE%E8%AE%A1%EF%BC%88%E4%B8%8A%EF%BC%89%EF%BC%9A%E4%B8%80%E5%BF%83%E5%A4%9A%E7%94%A8%E7%9A%84%E7%8E%B0%E4%BB%A3CPU.md.html">20  面向流水线的指令设计（上）：一心多用的现代CPU.md</a>

                </li>
                <li>

                    
                    <a href="21%20%20%E9%9D%A2%E5%90%91%E6%B5%81%E6%B0%B4%E7%BA%BF%E7%9A%84%E6%8C%87%E4%BB%A4%E8%AE%BE%E8%AE%A1%EF%BC%88%E4%B8%8B%EF%BC%89%EF%BC%9A%E5%A5%94%E8%85%BE4%E6%98%AF%E6%80%8E%E4%B9%88%E5%A4%B1%E8%B4%A5%E7%9A%84%EF%BC%9F.md.html">21  面向流水线的指令设计（下）：奔腾4是怎么失败的？.md</a>

                </li>
                <li>

                    
                    <a href="22%20%20%E5%86%92%E9%99%A9%E5%92%8C%E9%A2%84%E6%B5%8B%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9Ahazard%E6%98%AF%E2%80%9C%E5%8D%B1%E2%80%9D%E4%B9%9F%E6%98%AF%E2%80%9C%E6%9C%BA%E2%80%9D.md.html">22  冒险和预测（一）：hazard是“危”也是“机”.md</a>

                </li>
                <li>

                    
                    <a href="23%20%20%E5%86%92%E9%99%A9%E5%92%8C%E9%A2%84%E6%B5%8B%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E6%B5%81%E6%B0%B4%E7%BA%BF%E9%87%8C%E7%9A%84%E6%8E%A5%E5%8A%9B%E8%B5%9B.md.html">23  冒险和预测（二）：流水线里的接力赛.md</a>

                </li>
                <li>

                    
                    <a href="24%20%20%E5%86%92%E9%99%A9%E5%92%8C%E9%A2%84%E6%B5%8B%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9ACPU%E9%87%8C%E7%9A%84%E2%80%9C%E7%BA%BF%E7%A8%8B%E6%B1%A0%E2%80%9D.md.html">24  冒险和预测（三）：CPU里的“线程池”.md</a>

                </li>
                <li>

                    
                    <a href="25%20%20%E5%86%92%E9%99%A9%E5%92%8C%E9%A2%84%E6%B5%8B%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E4%BB%8A%E5%A4%A9%E4%B8%8B%E9%9B%A8%E4%BA%86%EF%BC%8C%E6%98%8E%E5%A4%A9%E8%BF%98%E4%BC%9A%E4%B8%8B%E9%9B%A8%E4%B9%88%EF%BC%9F.md.html">25  冒险和预测（四）：今天下雨了，明天还会下雨么？.md</a>

                </li>
                <li>

                    
                    <a href="26%20%20Superscalar%E5%92%8CVLIW%EF%BC%9A%E5%A6%82%E4%BD%95%E8%AE%A9CPU%E7%9A%84%E5%90%9E%E5%90%90%E7%8E%87%E8%B6%85%E8%BF%871%EF%BC%9F.md.html">26  Superscalar和VLIW：如何让CPU的吞吐率超过1？.md</a>

                </li>
                <li>

                    
                    <a href="27%20%20SIMD%EF%BC%9A%E5%A6%82%E4%BD%95%E5%8A%A0%E9%80%9F%E7%9F%A9%E9%98%B5%E4%B9%98%E6%B3%95%EF%BC%9F.md.html">27  SIMD：如何加速矩阵乘法？.md</a>

                </li>
                <li>

                    
                    <a href="28%20%20%E5%BC%82%E5%B8%B8%E5%92%8C%E4%B8%AD%E6%96%AD%EF%BC%9A%E7%A8%8B%E5%BA%8F%E5%87%BA%E9%94%99%E4%BA%86%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9F.md.html">28  异常和中断：程序出错了怎么办？.md</a>

                </li>
                <li>

                    
                    <a href="29%20%20CISC%E5%92%8CRISC%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E6%89%8B%E6%9C%BA%E8%8A%AF%E7%89%87%E9%83%BD%E6%98%AFARM%EF%BC%9F.md.html">29  CISC和RISC：为什么手机芯片都是ARM？.md</a>

                </li>
                <li>

                    
                    <a href="30%20%20GPU%EF%BC%88%E4%B8%8A%EF%BC%89%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E7%8E%A9%E6%B8%B8%E6%88%8F%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8GPU%EF%BC%9F.md.html">30  GPU（上）：为什么玩游戏需要使用GPU？.md</a>

                </li>
                <li>

                    
                    <a href="31%20%20GPU%EF%BC%88%E4%B8%8B%EF%BC%89%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8GPU%EF%BC%9F.md.html">31  GPU（下）：为什么深度学习需要使用GPU？.md</a>

                </li>
                <li>

                    
                    <a href="32%20%20FPGA%E3%80%81ASIC%E5%92%8CTPU%EF%BC%88%E4%B8%8A%EF%BC%89%EF%BC%9A%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E7%9A%84%E9%BB%84%E9%87%91%E6%97%B6%E4%BB%A3.md.html">32  FPGA、ASIC和TPU（上）：计算机体系结构的黄金时代.md</a>

                </li>
                <li>

                    
                    <a href="33%20%20%E8%A7%A3%E8%AF%BBTPU%EF%BC%9A%E8%AE%BE%E8%AE%A1%E5%92%8C%E6%8B%86%E8%A7%A3%E4%B8%80%E5%9D%97ASIC%E8%8A%AF%E7%89%87.md.html">33  解读TPU：设计和拆解一块ASIC芯片.md</a>

                </li>
                <li>

                    
                    <a href="34%20%20%E7%90%86%E8%A7%A3%E8%99%9A%E6%8B%9F%E6%9C%BA%EF%BC%9A%E4%BD%A0%E5%9C%A8%E4%BA%91%E4%B8%8A%E6%8B%BF%E5%88%B0%E7%9A%84%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%98%AF%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84%EF%BC%9F.md.html">34  理解虚拟机：你在云上拿到的计算机是什么样的？.md</a>

                </li>
                <li>

                    
                    <a href="35%20%20%E5%AD%98%E5%82%A8%E5%99%A8%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84%E5%85%A8%E6%99%AF%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E7%9A%84%E5%A4%A7%E9%87%91%E5%AD%97%E5%A1%94%E9%95%BF%E4%BB%80%E4%B9%88%E6%A0%B7%EF%BC%9F.md.html">35  存储器层次结构全景：数据存储的大金字塔长什么样？.md</a>

                </li>
                <li>

                    
                    <a href="36%20%20%E5%B1%80%E9%83%A8%E6%80%A7%E5%8E%9F%E7%90%86%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E6%80%A7%E8%83%BD%E8%B7%9F%E4%B8%8D%E4%B8%8A%EF%BC%8C%E5%8A%A0%E4%B8%AA%E7%BC%93%E5%AD%98%E5%B0%B1%E5%A5%BD%E4%BA%86%EF%BC%9F.md.html">36  局部性原理：数据库性能跟不上，加个缓存就好了？.md</a>

                </li>
                <li>

                    
                    <a href="37%20%20%E7%90%86%E8%A7%A3CPU%20Cache%EF%BC%88%E4%B8%8A%EF%BC%89%EF%BC%9A%E2%80%9C4%E6%AF%AB%E7%A7%92%E2%80%9D%E7%A9%B6%E7%AB%9F%E5%80%BC%E5%A4%9A%E5%B0%91%E9%92%B1%EF%BC%9F.md.html">37  理解CPU Cache（上）：“4毫秒”究竟值多少钱？.md</a>

                </li>
                <li>

                    
                    <a href="38%20%20%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%EF%BC%88%E4%B8%8B%EF%BC%89%EF%BC%9A%E4%BD%A0%E7%A1%AE%E5%AE%9A%E4%BD%A0%E7%9A%84%E6%95%B0%E6%8D%AE%E6%9B%B4%E6%96%B0%E4%BA%86%E4%B9%88%EF%BC%9F.md.html">38  高速缓存（下）：你确定你的数据更新了么？.md</a>

                </li>
                <li>

                    
                    <a href="39%20%20MESI%E5%8D%8F%E8%AE%AE%EF%BC%9A%E5%A6%82%E4%BD%95%E8%AE%A9%E5%A4%9A%E6%A0%B8CPU%E7%9A%84%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E4%BF%9D%E6%8C%81%E4%B8%80%E8%87%B4%EF%BC%9F.md.html">39  MESI协议：如何让多核CPU的高速缓存保持一致？.md</a>

                </li>
                <li>

                    
                    <a href="40%20%20%E7%90%86%E8%A7%A3%E5%86%85%E5%AD%98%EF%BC%88%E4%B8%8A%EF%BC%89%EF%BC%9A%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E5%92%8C%E5%86%85%E5%AD%98%E4%BF%9D%E6%8A%A4%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F.md.html">40  理解内存（上）：虚拟内存和内存保护是什么？.md</a>

                </li>
                <li>

                    
                    <a href="41%20%20%E7%90%86%E8%A7%A3%E5%86%85%E5%AD%98%EF%BC%88%E4%B8%8B%EF%BC%89%EF%BC%9A%E8%A7%A3%E6%9E%90TLB%E5%92%8C%E5%86%85%E5%AD%98%E4%BF%9D%E6%8A%A4.md.html">41  理解内存（下）：解析TLB和内存保护.md</a>

                </li>
                <li>

                    
                    <a href="42%20%20%E6%80%BB%E7%BA%BF%EF%BC%9A%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%86%85%E9%83%A8%E7%9A%84%E9%AB%98%E9%80%9F%E5%85%AC%E8%B7%AF.md.html">42  总线：计算机内部的高速公路.md</a>

                </li>
                <li>

                    
                    <a href="43%20%20%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E8%AE%BE%E5%A4%87%EF%BC%9A%E6%88%91%E4%BB%AC%E5%B9%B6%E4%B8%8D%E6%98%AF%E5%8F%AA%E8%83%BD%E7%94%A8%E7%81%AF%E6%B3%A1%E6%98%BE%E7%A4%BA%E2%80%9C0%E2%80%9D%E5%92%8C%E2%80%9C1%E2%80%9D.md.html">43  输入输出设备：我们并不是只能用灯泡显示“0”和“1”.md</a>

                </li>
                <li>

                    
                    <a href="44%20%20%E7%90%86%E8%A7%A3IO_WAIT%EF%BC%9AIO%E6%80%A7%E8%83%BD%E5%88%B0%E5%BA%95%E6%98%AF%E6%80%8E%E4%B9%88%E5%9B%9E%E4%BA%8B%E5%84%BF%EF%BC%9F.md.html">44  理解IO_WAIT：IO性能到底是怎么回事儿？.md</a>

                </li>
                <li>

                    
                    <a href="45%20%20%E6%9C%BA%E6%A2%B0%E7%A1%AC%E7%9B%98%EF%BC%9AGoogle%E6%97%A9%E6%9C%9F%E7%94%A8%E8%BF%87%E7%9A%84%E2%80%9C%E9%BB%91%E7%A7%91%E6%8A%80%E2%80%9D.md.html">45  机械硬盘：Google早期用过的“黑科技”.md</a>

                </li>
                <li>

                    
                    <a href="46%20%20SSD%E7%A1%AC%E7%9B%98%EF%BC%88%E4%B8%8A%EF%BC%89%EF%BC%9A%E5%A6%82%E4%BD%95%E5%AE%8C%E6%88%90%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E7%9A%84KPI%EF%BC%9F.md.html">46  SSD硬盘（上）：如何完成性能优化的KPI？.md</a>

                </li>
                <li>

                    
                    <a href="47%20%20SSD%E7%A1%AC%E7%9B%98%EF%BC%88%E4%B8%8B%EF%BC%89%EF%BC%9A%E5%A6%82%E4%BD%95%E5%AE%8C%E6%88%90%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E7%9A%84KPI%EF%BC%9F.md.html">47  SSD硬盘（下）：如何完成性能优化的KPI？.md</a>

                </li>
                <li>

                    
                    <a href="48%20%20DMA%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88Kafka%E8%BF%99%E4%B9%88%E5%BF%AB%EF%BC%9F.md.html">48  DMA：为什么Kafka这么快？.md</a>

                </li>
                <li>

                    <a class="current-tab" href="49%20%20%E6%95%B0%E6%8D%AE%E5%AE%8C%E6%95%B4%E6%80%A7%EF%BC%88%E4%B8%8A%EF%BC%89%EF%BC%9A%E7%A1%AC%E4%BB%B6%E5%9D%8F%E4%BA%86%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9F.md.html">49  数据完整性（上）：硬件坏了怎么办？.md</a>
                    

                </li>
                <li>

                    
                    <a href="50%20%20%E6%95%B0%E6%8D%AE%E5%AE%8C%E6%95%B4%E6%80%A7%EF%BC%88%E4%B8%8B%EF%BC%89%EF%BC%9A%E5%A6%82%E4%BD%95%E8%BF%98%E5%8E%9F%E7%8A%AF%E7%BD%AA%E7%8E%B0%E5%9C%BA%EF%BC%9F.md.html">50  数据完整性（下）：如何还原犯罪现场？.md</a>

                </li>
                <li>

                    
                    <a href="51%20%20%E5%88%86%E5%B8%83%E5%BC%8F%E8%AE%A1%E7%AE%97%EF%BC%9A%E5%A6%82%E6%9E%9C%E6%89%80%E6%9C%89%E4%BA%BA%E7%9A%84%E5%A4%A7%E8%84%91%E9%83%BD%E8%81%94%E7%BD%91%E4%BC%9A%E6%80%8E%E6%A0%B7%EF%BC%9F.md.html">51  分布式计算：如果所有人的大脑都联网会怎样？.md</a>

                </li>
                <li>

                    
                    <a href="52%20%20%E8%AE%BE%E8%AE%A1%E5%A4%A7%E5%9E%8BDMP%E7%B3%BB%E7%BB%9F%EF%BC%88%E4%B8%8A%EF%BC%89%EF%BC%9AMongoDB%E5%B9%B6%E4%B8%8D%E6%98%AF%E4%BB%80%E4%B9%88%E7%81%B5%E4%B8%B9%E5%A6%99%E8%8D%AF.md.html">52  设计大型DMP系统（上）：MongoDB并不是什么灵丹妙药.md</a>

                </li>
                <li>

                    
                    <a href="53%20%20%E8%AE%BE%E8%AE%A1%E5%A4%A7%E5%9E%8BDMP%E7%B3%BB%E7%BB%9F%EF%BC%88%E4%B8%8B%EF%BC%89%EF%BC%9ASSD%E6%8B%AF%E6%95%91%E4%BA%86%E6%89%80%E6%9C%89%E7%9A%84DBA.md.html">53  设计大型DMP系统（下）：SSD拯救了所有的DBA.md</a>

                </li>
                <li>

                    
                    <a href="54%20%20%E7%90%86%E8%A7%A3Disruptor%EF%BC%88%E4%B8%8A%EF%BC%89%EF%BC%9A%E5%B8%A6%E4%BD%A0%E4%BD%93%E4%BC%9ACPU%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E7%9A%84%E9%A3%8E%E9%A9%B0%E7%94%B5%E6%8E%A3.md.html">54  理解Disruptor（上）：带你体会CPU高速缓存的风驰电掣.md</a>

                </li>
                <li>

                    
                    <a href="55%20%20%E7%90%86%E8%A7%A3Disruptor%EF%BC%88%E4%B8%8B%EF%BC%89%EF%BC%9A%E4%B8%8D%E9%9C%80%E8%A6%81%E6%8D%A2%E6%8C%A1%E5%92%8C%E8%B8%A9%E5%88%B9%E8%BD%A6%E7%9A%84CPU%EF%BC%8C%E6%9C%89%E5%A4%9A%E5%BF%AB%EF%BC%9F.md.html">55  理解Disruptor（下）：不需要换挡和踩刹车的CPU，有多快？.md</a>

                </li>
                <li>

                    
                    <a href="%E7%BB%93%E6%9D%9F%E8%AF%AD%20%20%E7%9F%A5%E4%B9%9F%E6%97%A0%E6%B6%AF%EF%BC%8C%E6%84%BF%E4%BD%A0%E4%B9%9F%E4%BA%AB%E5%8F%97%E5%8F%91%E7%8E%B0%E7%9A%84%E4%B9%90%E8%B6%A3.md.html">结束语  知也无涯，愿你也享受发现的乐趣.md</a>

                </li>
            </ul>

        </div>
    </div>

    <div class="sidebar-toggle" onclick="sidebar_toggle()" onmouseover="add_inner()" onmouseleave="remove_inner()">
        <div class="sidebar-toggle-inner"></div>
    </div>

    <script>
        function add_inner() {
            let inner = document.querySelector('.sidebar-toggle-inner')
            inner.classList.add('show')
        }

        function remove_inner() {
            let inner = document.querySelector('.sidebar-toggle-inner')
            inner.classList.remove('show')
        }

        function sidebar_toggle() {
            let sidebar_toggle = document.querySelector('.sidebar-toggle')
            let sidebar = document.querySelector('.book-sidebar')
            let content = document.querySelector('.off-canvas-content')
            if (sidebar_toggle.classList.contains('extend')) { // show
                sidebar_toggle.classList.remove('extend')
                sidebar.classList.remove('hide')
                content.classList.remove('extend')
            } else { // hide
                sidebar_toggle.classList.add('extend')
                sidebar.classList.add('hide')
                content.classList.add('extend')
            }
        }


function open_sidebar() {
    let sidebar = document.querySelector('.book-sidebar')
    let overlay = document.querySelector('.off-canvas-overlay')
    sidebar.classList.add('show')
    overlay.classList.add('show')
}
function hide_canvas() {
    let sidebar = document.querySelector('.book-sidebar')
    let overlay = document.querySelector('.off-canvas-overlay')
    sidebar.classList.remove('show')
    overlay.classList.remove('show')
}

    </script>

    <div class="off-canvas-content">
        <div class="columns">
            <div class="column col-12 col-lg-12">
                <div class="book-navbar">
                    <!-- For Responsive Layout -->
                    <header class="navbar">
                        <section class="navbar-section">
                            <a onclick="open_sidebar()">
                                <i class="icon icon-menu"></i>
                            </a>
                        </section>
                    </header>
                </div>
                <div class="book-content" style="max-width: 960px; margin: 0 auto;
    overflow-x: auto;
    overflow-y: hidden;">
                    <div class="book-post">
                        <p id="tip" align="center"></p>
                        <div><h1>49  数据完整性（上）：硬件坏了怎么办？</h1>
<p>2012 年的时候，我第一次在工作中，遇到一个因为硬件的不可靠性引发的 Bug。正是因为这个 Bug，让我开始逐步花很多的时间，去复习回顾整个计算机系统里面的底层知识。</p>
<p>当时，我正在 MediaV 带领一个 20 多人的团队，负责公司的广告数据和机器学习算法。其中有一部分工作，就是用 Hadoop 集群处理所有的数据和报表业务。当时我们的业务增长很快，所以会频繁地往 Hadoop 集群里面添置机器。2012 年的时候，国内的云计算平台还不太成熟，所以我们都是自己采购硬件，放在托管的数据中心里面。</p>
<p>那个时候，我们的 Hadoop 集群服务器，在从 100 台服务器往 1000 台服务器走。我们觉得，像 Dell 这样品牌厂商的服务器太贵了，而且能够提供的硬件配置和我们的期望也有差异。于是，运维的同学开始和 OEM 厂商合作，自己定制服务器，批量采购硬盘、内存。</p>
<p>那个时候，大家都听过 Google 早期发展时，为了降低成本买了很多二手的硬件来降低成本，通过分布式的方式来保障系统的可靠性的办法。虽然我们还没有抠门到去买二手硬件，不过当时，我们选择购买了普通的机械硬盘，而不是企业级的、用在数据中心的机械硬盘；采购了普通的内存条，而不是带 ECC 纠错的服务器内存条，想着能省一点儿是一点儿。</p>
<h2>单比特翻转：软件解决不了的硬件错误</h2>
<p>忽然有一天，我们最大的、每小时执行一次的数据处理报表应用，完成时间变得比平时晚了不少。一开始，我们并没有太在意，毕竟当时数据量每天都在增长，慢一点就慢一点了。但是，接着糟糕的事情开始发生了。</p>
<p>一方面，我们发现，报表任务有时候在一个小时之内执行不完，接着，偶尔整个报表任务会执行失败。于是，我们不得不停下手头开发的工作，开始排查这个问题。</p>
<p>用过 Hadoop 的话，你可能知道，作为一个分布式的应用，考虑到硬件的故障，Hadoop 本身会在特定节点计算出错的情况下，重试整个计算过程。之前的报表跑得慢，就是因为有些节点的计算任务失败过，只是在重试之后又成功了。进一步分析，我们发现，程序的错误非常奇怪。有些数据计算的结果，比如“34+23”，结果应该是“57”，但是却变成了一个美元符号“$”。</p>
<p>前前后后折腾了一周，我们发现，从日志上看，大部分出错的任务都在几个固定的硬件节点上。</p>
<p>另一方面，我们发现，问题出现在我们新的一批自己定制的硬件上架之后。于是，和运维团队的同事沟通近期的硬件变更，并且翻阅大量 Hadoop 社区的邮件组列表之后，我们有了一个大胆的推测。</p>
<p>我们推测，这个错误，来自我们自己定制的硬件。定制的硬件没有使用 ECC 内存，在大量的数据中，内存中出现了<strong>单比特翻转</strong>（Single-Bit Flip）这个传说中的硬件错误。</p>
<p>那这个符号是怎么来的呢？是由于内存中的一个整数字符，遇到了一次单比特翻转转化而来的。 它的 ASCII 码二进制表示是 0010 0100，所以它完全可能来自 0011 0100 遇到一次在第 4 个比特的单比特翻转，也就是从整数“4”变过来的。但是我们也只能<strong>推测</strong>是这个错误，而不能<strong>确信</strong>是这个错误。因为单比特翻转是一个随机现象，我们没法稳定复现这个问题。</p>
<p><img src="assets/45ad4eb91f48afd08c581148d5f6320f.jpeg" alt="img" /></p>
<p><strong>ECC 内存</strong>的全称是 Error-Correcting Code memory，中文名字叫作<strong>纠错内存</strong>。顾名思义，就是在内存里面出现错误的时候，能够自己纠正过来。</p>
<p>在和运维同学沟通之后，我们把所有自己定制的服务器的内存替换成了 ECC 内存，之后这个问题就消失了。这也使得我们基本确信，问题的来源就是因为没有使用 ECC 内存。我们所有工程师的开发用机在 2012 年，也换成了 32G 内存。是的，换下来的内存没有别的去处，都安装到了研发团队的开发机上。</p>
<h2>奇偶校验和校验位：捕捉错误的好办法</h2>
<p>其实，内存里面的单比特翻转或者错误，并不是一个特别罕见的现象。无论是因为内存的制造质量造成的漏电，还是外部的射线，都有一定的概率，会造成单比特错误。而内存层面的数据出错，软件工程师并不知道，而且这个出错很有可能是随机的。遇上随机出现难以重现的错误，大家肯定受不了。我们必须要有一个办法，避免这个问题。</p>
<p>其实，在 ECC 内存发明之前，工程师们已经开始通过<strong>奇偶校验</strong>的方式，来发现这些错误。</p>
<p>奇偶校验的思路很简单。我们把内存里面的 N 位比特当成是一组。常见的，比如 8 位就是一个字节。然后，用额外的一位去记录，这 8 个比特里面有奇数个 1 还是偶数个 1。如果是奇数个 1，那额外的一位就记录为 1；如果是偶数个 1，那额外的一位就记录成 0。那额外的一位，我们就称之为<strong>校验码位</strong>。</p>
<p><img src="assets/e94c642bdf41290d6a4e5eb2d6bb3c40.jpeg" alt="img" /></p>
<p>如果在这个字节里面，我们不幸发生了单比特翻转，那么数据位计算得到的校验码，就和实际校验位里面的数据不一样。我们的内存就知道出错了。</p>
<p>除此之外，校验位有一个很大的优点，就是计算非常快，往往只需要遍历一遍需要校验的数据，通过一个 O(N) 的时间复杂度的算法，就能把校验结果计算出来。</p>
<p>校验码的思路，在很多地方都会用到。</p>
<p>比方说，我们下载一些软件的时候，你会看到，除了下载的包文件，还会有对应的 MD5 这样的哈希值或者循环冗余编码（CRC）的校验文件。这样，当我们把对应的软件下载下来之后，我们可以计算一下对应软件的校验码，和官方提供的校验码去做个比对，看看是不是一样。</p>
<p>如果不一样，你就不能轻易去安装这个软件了。因为有可能，这个软件包是坏的。但是，还有一种更危险的情况，就是你下载的这个软件包，可能是被人植入了后门的。安装上了之后，你的计算机的安全性就没有保障了。</p>
<p>不过，使用奇偶校验，还是有两个比较大的缺陷。</p>
<p>第一个缺陷，就是奇偶校验只能解决遇到单个位的错误，或者说奇数个位的错误。如果出现 2 个位进行了翻转，那么这个字节的校验位计算结果其实没有变，我们的校验位自然也就不能发现这个错误。</p>
<p>第二个缺陷，是它只能发现错误，但是不能纠正错误。所以，即使在内存里面发现数据错误了，我们也只能中止程序，而不能让程序继续正常地运行下去。如果这个只是我们的个人电脑，做一些无关紧要的应用，这倒是无所谓了。</p>
<p>但是，你想一下，如果你在服务器上进行某个复杂的计算任务，这个计算已经跑了一周乃至一个月了，还有两三天就跑完了。这个时候，出现内存里面的错误，要再从头跑起，估计你内心是崩溃的。</p>
<p>所以，我们需要一个比简单的校验码更好的解决方案，一个能够发现更多位的错误，并且能够把这些错误纠正过来的解决方案，也就是工程师们发明的 ECC 内存所使用的解决方案。</p>
<p>我们不仅能捕捉到错误，还要能够纠正发生的错误。这个策略，我们通常叫作<strong>纠错码</strong>（Error Correcting Code）。它还有一个升级版本，叫作<strong>纠删码</strong>（Erasure Code），不仅能够纠正错误，还能够在错误不能纠正的时候，直接把数据删除。无论是我们的 ECC 内存，还是网络传输，乃至硬盘的 RAID，其实都利用了纠错码和纠删码的相关技术。</p>
<p>想要看看我们怎么通过算法，怎么配置硬件，使得我们不仅能够发现单个位的错误，而能发现更多位的错误，你一定要记得跟上下一讲的内容。</p>
<h2>总结延伸</h2>
<p>好了，让我们一起来总结一下今天的内容。</p>
<p>我给你介绍了我自己亲身经历的一个硬件错误带来的 Bug。由于没有采用 ECC 内存，导致我们的数据处理中，出现了大量的单比特数据翻转的错误。这些硬件带来的错误，其实我们没有办法在软件层面解决。</p>
<p>如果对于硬件以及硬件本身的原理不够熟悉，恐怕这个问题的解决方案还是遥遥无期。如果你对计算机组成原理有所了解，并能够意识到，在硬件的存储层有着数据验证和纠错的需求，那你就能在有限的时间内定位到问题所在。</p>
<p>进一步地，我为你简单介绍了奇偶校验，也就是如何通过冗余的一位数据，发现在硬件层面出现的位错误。但是，奇偶校验以及其他的校验码，只能发现错误，没有办法纠正错误。所以，下一讲，我们一起来看看，怎么利用纠错码这样的方式，来解决问题。</p>
<h2>推荐阅读</h2>
<p>我推荐你去深入阅读一下 Wikipedia 里面，关于<a href="https://en.wikipedia.org/wiki/Cyclic_redundancy_check">CRC</a>的内容，了解一下，这样的校验码的详细算法。</p>
</div>
                    </div>
                    <div>
                        <div style="float: left">
                            <a href="48%20%20DMA%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88Kafka%E8%BF%99%E4%B9%88%E5%BF%AB%EF%BC%9F.md.html">上一页</a>
                        </div>
                        <div style="float: right">
                            <a href="50%20%20%E6%95%B0%E6%8D%AE%E5%AE%8C%E6%95%B4%E6%80%A7%EF%BC%88%E4%B8%8B%EF%BC%89%EF%BC%9A%E5%A6%82%E4%BD%95%E8%BF%98%E5%8E%9F%E7%8A%AF%E7%BD%AA%E7%8E%B0%E5%9C%BA%EF%BC%9F.md.html">下一页</a>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <a class="off-canvas-overlay" onclick="hide_canvas()"></a>
</div>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/v652eace1692a40cfa3763df669d7439c1639079717194" integrity="sha512-Gi7xpJR8tSkrpF7aordPZQlW2DLtzUlZcumS8dMQjwDHEnw9I7ZLyiOj/6tZStRBGtGgN6ceN6cMH8z7etPGlw==" data-cf-beacon='{"rayId":"712357bb0a6989b3","version":"2021.12.0","r":1,"token":"1f5d475227ce4f0089a7cff1ab17c0f5","si":100}' crossorigin="anonymous"></script>
</body>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NPSEEVD756"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', 'G-NPSEEVD756');
    var path = window.location.pathname
    var cookie = getCookie("lastPath");
    console.log(path)
    if (path.replace("/", "") === "") {
        if (cookie.replace("/", "") !== "") {
            console.log(cookie)
            document.getElementById("tip").innerHTML = "<a href='" + cookie + "'>跳转到上次进度</a>"
        }
    } else {
        setCookie("lastPath", path)
    }

    function setCookie(cname, cvalue) {
        var d = new Date();
        d.setTime(d.getTime() + (180 * 24 * 60 * 60 * 1000));
        var expires = "expires=" + d.toGMTString();
        document.cookie = cname + "=" + cvalue + "; " + expires + ";path = /";
    }

    function getCookie(cname) {
        var name = cname + "=";
        var ca = document.cookie.split(';');
        for (var i = 0; i < ca.length; i++) {
            var c = ca[i].trim();
            if (c.indexOf(name) === 0) return c.substring(name.length, c.length);
        }
        return "";
    }

</script>

</html>
