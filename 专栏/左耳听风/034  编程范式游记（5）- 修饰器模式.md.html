<!DOCTYPE html>
<!-- saved from url=(0046)https://kaiiiz.github.io/hexo-theme-book-demo/ -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
        <link rel="icon" href="../../static/favicon.png">
        <title>034  编程范式游记（5）- 修饰器模式.md</title>
        <!-- Spectre.css framework -->
        <link rel="stylesheet" href="../../static/index.css">
        <!-- theme css & js -->
        <meta name="generator" content="Hexo 4.2.0">
    </head>

<body>

<div class="book-container">
    <div class="book-sidebar">
        <div class="book-brand">
            <a href="../../index.html">
                <img src="../../static/favicon.png">
                <span>技术文章摘抄</span>
            </a>
        </div>
        <div class="book-menu uncollapsible">
            <ul class="uncollapsible">
                <li><a href="../../index.html" class="current-tab">首页</a></li>
            </ul>

            <ul class="uncollapsible">
                <li><a href="../index.html">上一级</a></li>
            </ul>

            <ul class="uncollapsible">
                <li>

                    
                    <a href="000%20%E5%BC%80%E7%AF%87%E8%AF%8D%20%20%E6%B4%9E%E6%82%89%E6%8A%80%E6%9C%AF%E7%9A%84%E6%9C%AC%E8%B4%A8%EF%BC%8C%E4%BA%AB%E5%8F%97%E7%A7%91%E6%8A%80%E7%9A%84%E4%B9%90%E8%B6%A3.md.html">000 开篇词  洞悉技术的本质，享受科技的乐趣.md</a>

                </li>
                <li>

                    
                    <a href="001%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E5%A6%82%E4%BD%95%E7%94%A8%E6%8A%80%E6%9C%AF%E5%8F%98%E7%8E%B0%EF%BC%88%E4%B8%8A%EF%BC%89.md.html">001  程序员如何用技术变现（上）.md</a>

                </li>
                <li>

                    
                    <a href="002%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E5%A6%82%E4%BD%95%E7%94%A8%E6%8A%80%E6%9C%AF%E5%8F%98%E7%8E%B0%EF%BC%88%E4%B8%8B%EF%BC%89.md.html">002  程序员如何用技术变现（下）.md</a>

                </li>
                <li>

                    
                    <a href="003%20%20Equifax%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%E5%A7%8B%E6%9C%AB.md.html">003  Equifax信息泄露始末.md</a>

                </li>
                <li>

                    
                    <a href="004%20%20%E4%BB%8EEquifax%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8.md.html">004  从Equifax信息泄露看数据安全.md</a>

                </li>
                <li>

                    
                    <a href="005%20%20%E4%BD%95%E4%B8%BA%E6%8A%80%E6%9C%AF%E9%A2%86%E5%AF%BC%E5%8A%9B.md.html">005  何为技术领导力.md</a>

                </li>
                <li>

                    
                    <a href="006%20%20%E5%A6%82%E4%BD%95%E6%8B%A5%E6%9C%89%E6%8A%80%E6%9C%AF%E9%A2%86%E5%AF%BC%E5%8A%9B.md.html">006  如何拥有技术领导力.md</a>

                </li>
                <li>

                    
                    <a href="007%20%20%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB%EF%BC%9A%E6%AF%8F%E4%B8%AA%E7%A8%8B%E5%BA%8F%E5%91%98%E9%83%BD%E8%AF%A5%E7%9F%A5%E9%81%93%E7%9A%84%E4%BA%8B.md.html">007  推荐阅读：每个程序员都该知道的事.md</a>

                </li>
                <li>

                    
                    <a href="008%20%20Go%E8%AF%AD%E8%A8%80%EF%BC%8CDocker%E5%92%8C%E6%96%B0%E6%8A%80%E6%9C%AF.md.html">008  Go语言，Docker和新技术.md</a>

                </li>
                <li>

                    
                    <a href="009%20%20%E7%AD%94%E7%96%91%E8%A7%A3%E6%83%91%EF%BC%9A%E6%B8%B4%E6%9C%9B%E3%80%81%E7%83%AD%E6%83%85%E5%92%8C%E9%80%89%E6%8B%A9.md.html">009  答疑解惑：渴望、热情和选择.md</a>

                </li>
                <li>

                    
                    <a href="010%20%20%E5%A6%82%E4%BD%95%E6%88%90%E4%B8%BA%E4%B8%80%E4%B8%AA%E5%A4%A7%E5%AE%B6%E6%84%BF%E6%84%8F%E8%BF%BD%E9%9A%8F%E7%9A%84Leader%EF%BC%9F.md.html">010  如何成为一个大家愿意追随的Leader？.md</a>

                </li>
                <li>

                    
                    <a href="011%20%20%E7%A8%8B%E5%BA%8F%E4%B8%AD%E7%9A%84%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%EF%BC%9A%E9%94%99%E8%AF%AF%E8%BF%94%E5%9B%9E%E7%A0%81%E5%92%8C%E5%BC%82%E5%B8%B8%E6%8D%95%E6%8D%89.md.html">011  程序中的错误处理：错误返回码和异常捕捉.md</a>

                </li>
                <li>

                    
                    <a href="012%20%20%E7%A8%8B%E5%BA%8F%E4%B8%AD%E7%9A%84%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%EF%BC%9A%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%92%8C%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5.md.html">012  程序中的错误处理：异步编程和最佳实践.md</a>

                </li>
                <li>

                    
                    <a href="013%20%20%E9%AD%94%E6%95%B0%200x5f3759df.md.html">013  魔数 0x5f3759df.md</a>

                </li>
                <li>

                    
                    <a href="014%20%20%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB%EF%BC%9A%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0101.md.html">014  推荐阅读：机器学习101.md</a>

                </li>
                <li>

                    
                    <a href="015%20%20%E6%97%B6%E9%97%B4%E7%AE%A1%E7%90%86%EF%BC%9A%E5%90%8C%E6%89%AD%E6%9B%B2%E6%97%B6%E9%97%B4%E7%9A%84%E4%BA%8B%E5%84%BF%E6%8A%97%E4%BA%89.md.html">015  时间管理：同扭曲时间的事儿抗争.md</a>

                </li>
                <li>

                    
                    <a href="016%20%20%E6%97%B6%E9%97%B4%E7%AE%A1%E7%90%86%EF%BC%9A%E6%8A%95%E8%B5%84%E8%B5%9A%E5%8F%96%E6%97%B6%E9%97%B4.md.html">016  时间管理：投资赚取时间.md</a>

                </li>
                <li>

                    
                    <a href="017%20%20%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%EF%BC%9A%E5%BA%94%E5%AF%B9%E6%95%85%E9%9A%9C.md.html">017  故障处理最佳实践：应对故障.md</a>

                </li>
                <li>

                    
                    <a href="018%20%20%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%EF%BC%9A%E6%95%85%E9%9A%9C%E6%94%B9%E8%BF%9B.md.html">018  故障处理最佳实践：故障改进.md</a>

                </li>
                <li>

                    
                    <a href="019%20%20%E7%AD%94%E7%96%91%E8%A7%A3%E6%83%91%EF%BC%9A%E6%88%91%E4%BB%AC%E5%BA%94%E8%AF%A5%E8%83%BD%E5%A4%9F%E8%AF%86%E5%88%AB%E7%9A%84%E8%A1%A8%E8%B1%A1%E5%92%8C%E6%9C%AC%E8%B4%A8.md.html">019  答疑解惑：我们应该能够识别的表象和本质.md</a>

                </li>
                <li>

                    
                    <a href="020%20%20%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E7%9A%84%E5%86%B0%E4%B8%8E%E7%81%AB.md.html">020  分布式系统架构的冰与火.md</a>

                </li>
                <li>

                    
                    <a href="021%20%20%E4%BB%8E%E4%BA%9A%E9%A9%AC%E9%80%8A%E7%9A%84%E5%AE%9E%E8%B7%B5%EF%BC%8C%E8%B0%88%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E7%9A%84%E9%9A%BE%E7%82%B9.md.html">021  从亚马逊的实践，谈分布式系统的难点.md</a>

                </li>
                <li>

                    
                    <a href="022%20%20%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%8A%80%E6%9C%AF%E6%A0%88.md.html">022  分布式系统的技术栈.md</a>

                </li>
                <li>

                    
                    <a href="023%20%20%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF%EF%BC%9A%E5%85%A8%E6%A0%88%E7%9B%91%E6%8E%A7.md.html">023  分布式系统关键技术：全栈监控.md</a>

                </li>
                <li>

                    
                    <a href="024%20%20%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF%EF%BC%9A%E6%9C%8D%E5%8A%A1%E8%B0%83%E5%BA%A6.md.html">024  分布式系统关键技术：服务调度.md</a>

                </li>
                <li>

                    
                    <a href="025%20%20%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF%EF%BC%9A%E6%B5%81%E9%87%8F%E4%B8%8E%E6%95%B0%E6%8D%AE%E8%B0%83%E5%BA%A6.md.html">025  分布式系统关键技术：流量与数据调度.md</a>

                </li>
                <li>

                    
                    <a href="026%20%20%E6%B4%9E%E6%82%89PaaS%E5%B9%B3%E5%8F%B0%E7%9A%84%E6%9C%AC%E8%B4%A8.md.html">026  洞悉PaaS平台的本质.md</a>

                </li>
                <li>

                    
                    <a href="027%20%20%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB%EF%BC%9A%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E7%BB%8F%E5%85%B8%E8%B5%84%E6%96%99.md.html">027  推荐阅读：分布式系统架构经典资料.md</a>

                </li>
                <li>

                    
                    <a href="028%20%20%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F%E6%B8%B8%E8%AE%B0%EF%BC%881%EF%BC%89-%20%E8%B5%B7%E6%BA%90.md.html">028  编程范式游记（1）- 起源.md</a>

                </li>
                <li>

                    
                    <a href="029%20%20%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F%E6%B8%B8%E8%AE%B0%EF%BC%882%EF%BC%89-%20%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B.md.html">029  编程范式游记（2）- 泛型编程.md</a>

                </li>
                <li>

                    
                    <a href="030%20%20%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F%E6%B8%B8%E8%AE%B0%EF%BC%883%EF%BC%89%20-%20%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F%E5%92%8C%E6%B3%9B%E5%9E%8B%E7%9A%84%E6%9C%AC%E8%B4%A8.md.html">030  编程范式游记（3） - 类型系统和泛型的本质.md</a>

                </li>
                <li>

                    
                    <a href="031%20%20Git%E5%8D%8F%E5%90%8C%E5%B7%A5%E4%BD%9C%E6%B5%81%EF%BC%8C%E4%BD%A0%E8%AF%A5%E6%80%8E%E6%A0%B7%E9%80%89.md.html">031  Git协同工作流，你该怎样选.md</a>

                </li>
                <li>

                    
                    <a href="032%20%20%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB%EF%BC%9A%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE%E8%B0%83%E5%BA%A6%E7%9B%B8%E5%85%B3%E8%AE%BA%E6%96%87.md.html">032  推荐阅读：分布式数据调度相关论文.md</a>

                </li>
                <li>

                    
                    <a href="033%20%20%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F%E6%B8%B8%E8%AE%B0%EF%BC%884%EF%BC%89-%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.md.html">033  编程范式游记（4）- 函数式编程.md</a>

                </li>
                <li>

                    <a class="current-tab" href="034%20%20%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F%E6%B8%B8%E8%AE%B0%EF%BC%885%EF%BC%89-%20%E4%BF%AE%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F.md.html">034  编程范式游记（5）- 修饰器模式.md</a>
                    

                </li>
                <li>

                    
                    <a href="035%20%20%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F%E6%B8%B8%E8%AE%B0%EF%BC%886%EF%BC%89-%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B.md.html">035  编程范式游记（6）- 面向对象编程.md</a>

                </li>
                <li>

                    
                    <a href="036%20%20%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F%E6%B8%B8%E8%AE%B0%EF%BC%887%EF%BC%89-%20%E5%9F%BA%E4%BA%8E%E5%8E%9F%E5%9E%8B%E7%9A%84%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F.md.html">036  编程范式游记（7）- 基于原型的编程范式.md</a>

                </li>
                <li>

                    
                    <a href="037%20%20%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F%E6%B8%B8%E8%AE%B0%EF%BC%888%EF%BC%89-%20Go%20%E8%AF%AD%E8%A8%80%E7%9A%84%E5%A7%94%E6%89%98%E6%A8%A1%E5%BC%8F.md.html">037  编程范式游记（8）- Go 语言的委托模式.md</a>

                </li>
                <li>

                    
                    <a href="038%20%20%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F%E6%B8%B8%E8%AE%B0%EF%BC%889%EF%BC%89-%20%E7%BC%96%E7%A8%8B%E7%9A%84%E6%9C%AC%E8%B4%A8.md.html">038  编程范式游记（9）- 编程的本质.md</a>

                </li>
                <li>

                    
                    <a href="039%20%20%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F%E6%B8%B8%E8%AE%B0%EF%BC%8810%EF%BC%89-%20%E9%80%BB%E8%BE%91%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F.md.html">039  编程范式游记（10）- 逻辑编程范式.md</a>

                </li>
                <li>

                    
                    <a href="040%20%20%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F%E6%B8%B8%E8%AE%B0%EF%BC%8811%EF%BC%89-%20%E7%A8%8B%E5%BA%8F%E4%B8%96%E7%95%8C%E9%87%8C%E7%9A%84%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F.md.html">040  编程范式游记（11）- 程序世界里的编程范式.md</a>

                </li>
                <li>

                    
                    <a href="041%20%20%E5%BC%B9%E5%8A%9B%E8%AE%BE%E8%AE%A1%E7%AF%87%E4%B9%8B%E2%80%9C%E8%AE%A4%E8%AF%86%E6%95%85%E9%9A%9C%E5%92%8C%E5%BC%B9%E5%8A%9B%E8%AE%BE%E8%AE%A1%E2%80%9D.md.html">041  弹力设计篇之“认识故障和弹力设计”.md</a>

                </li>
                <li>

                    
                    <a href="042%20%20%E5%BC%B9%E5%8A%9B%E8%AE%BE%E8%AE%A1%E7%AF%87%E4%B9%8B%E2%80%9C%E9%9A%94%E7%A6%BB%E8%AE%BE%E8%AE%A1%E2%80%9D.md.html">042  弹力设计篇之“隔离设计”.md</a>

                </li>
                <li>

                    
                    <a href="043%20%20%E5%BC%B9%E5%8A%9B%E8%AE%BE%E8%AE%A1%E7%AF%87%E4%B9%8B%E2%80%9C%E5%BC%82%E6%AD%A5%E9%80%9A%E8%AE%AF%E8%AE%BE%E8%AE%A1%E2%80%9D.md.html">043  弹力设计篇之“异步通讯设计”.md</a>

                </li>
                <li>

                    
                    <a href="044%20%20%E5%BC%B9%E5%8A%9B%E8%AE%BE%E8%AE%A1%E7%AF%87%E4%B9%8B%E2%80%9C%E5%B9%82%E7%AD%89%E6%80%A7%E8%AE%BE%E8%AE%A1%E2%80%9D.md.html">044  弹力设计篇之“幂等性设计”.md</a>

                </li>
                <li>

                    
                    <a href="045%20%20%E5%BC%B9%E5%8A%9B%E8%AE%BE%E8%AE%A1%E7%AF%87%E4%B9%8B%E2%80%9C%E6%9C%8D%E5%8A%A1%E7%9A%84%E7%8A%B6%E6%80%81%E2%80%9D.md.html">045  弹力设计篇之“服务的状态”.md</a>

                </li>
                <li>

                    
                    <a href="046%20%20%E5%BC%B9%E5%8A%9B%E8%AE%BE%E8%AE%A1%E7%AF%87%E4%B9%8B%E2%80%9C%E8%A1%A5%E5%81%BF%E4%BA%8B%E5%8A%A1%E2%80%9D.md.html">046  弹力设计篇之“补偿事务”.md</a>

                </li>
                <li>

                    
                    <a href="047%20%20%E5%BC%B9%E5%8A%9B%E8%AE%BE%E8%AE%A1%E7%AF%87%E4%B9%8B%E2%80%9C%E9%87%8D%E8%AF%95%E8%AE%BE%E8%AE%A1%E2%80%9D.md.html">047  弹力设计篇之“重试设计”.md</a>

                </li>
                <li>

                    
                    <a href="048%20%20%E5%BC%B9%E5%8A%9B%E8%AE%BE%E8%AE%A1%E7%AF%87%E4%B9%8B%E2%80%9C%E7%86%94%E6%96%AD%E8%AE%BE%E8%AE%A1%E2%80%9D.md.html">048  弹力设计篇之“熔断设计”.md</a>

                </li>
                <li>

                    
                    <a href="049%20%20%E5%BC%B9%E5%8A%9B%E8%AE%BE%E8%AE%A1%E7%AF%87%E4%B9%8B%E2%80%9C%E9%99%90%E6%B5%81%E8%AE%BE%E8%AE%A1%E2%80%9D.md.html">049  弹力设计篇之“限流设计”.md</a>

                </li>
                <li>

                    
                    <a href="050%20%20%E5%BC%B9%E5%8A%9B%E8%AE%BE%E8%AE%A1%E7%AF%87%E4%B9%8B%E2%80%9C%E9%99%8D%E7%BA%A7%E8%AE%BE%E8%AE%A1%E2%80%9D.md.html">050  弹力设计篇之“降级设计”.md</a>

                </li>
                <li>

                    
                    <a href="051%20%20%E5%BC%B9%E5%8A%9B%E8%AE%BE%E8%AE%A1%E7%AF%87%E4%B9%8B%E2%80%9C%E5%BC%B9%E5%8A%9B%E8%AE%BE%E8%AE%A1%E6%80%BB%E7%BB%93%E2%80%9D.md.html">051  弹力设计篇之“弹力设计总结”.md</a>

                </li>
                <li>

                    
                    <a href="052%20%20%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8A%80%E6%9C%AF%20-%20%E5%8C%BA%E5%9D%97%E9%93%BE%E7%9A%84%E9%9D%A9%E5%91%BD%E6%80%A7%E5%8F%8A%E6%8A%80%E6%9C%AF%E6%A6%82%E8%A6%81.md.html">052  区块链技术 - 区块链的革命性及技术概要.md</a>

                </li>
                <li>

                    
                    <a href="053%20%20%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8A%80%E6%9C%AF%20-%20%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8A%80%E6%9C%AF%E7%BB%86%E8%8A%82%20-%20%E5%93%88%E5%B8%8C%E7%AE%97%E6%B3%95.md.html">053  区块链技术 - 区块链技术细节 - 哈希算法.md</a>

                </li>
                <li>

                    
                    <a href="054%20%20%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8A%80%E6%9C%AF%20-%20%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8A%80%E6%9C%AF%E7%BB%86%E8%8A%82%20-%20%E5%8A%A0%E5%AF%86%E5%92%8C%E6%8C%96%E7%9F%BF.md.html">054  区块链技术 - 区块链技术细节 - 加密和挖矿.md</a>

                </li>
                <li>

                    
                    <a href="055%20%20%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8A%80%E6%9C%AF%20-%20%E5%8E%BB%E4%B8%AD%E5%BF%83%E5%8C%96%E7%9A%84%E5%85%B1%E8%AF%86%E6%9C%BA%E5%88%B6.md.html">055  区块链技术 - 去中心化的共识机制.md</a>

                </li>
                <li>

                    
                    <a href="056%20%20%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8A%80%E6%9C%AF%20-%20%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6.md.html">056  区块链技术 - 智能合约.md</a>

                </li>
                <li>

                    
                    <a href="057%20%20%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8A%80%E6%9C%AF%20-%20%E4%BC%A0%E7%BB%9F%E9%87%91%E8%9E%8D%E5%92%8C%E8%99%9A%E6%8B%9F%E8%B4%A7%E5%B8%81.md.html">057  区块链技术 - 传统金融和虚拟货币.md</a>

                </li>
                <li>

                    
                    <a href="058%20%20%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1%E7%AF%87%E4%B9%8B%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81.md.html">058  管理设计篇之分布式锁.md</a>

                </li>
                <li>

                    
                    <a href="059%20%20%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1%E7%AF%87%E4%B9%8B%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83.md.html">059  管理设计篇之配置中心.md</a>

                </li>
                <li>

                    
                    <a href="060%20%20%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1%E7%AF%87%E4%B9%8B%E8%BE%B9%E8%BD%A6%E6%A8%A1%E5%BC%8F.md.html">060  管理设计篇之边车模式.md</a>

                </li>
                <li>

                    
                    <a href="061%20%20%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1%E7%AF%87%E4%B9%8B%E6%9C%8D%E5%8A%A1%E7%BD%91%E6%A0%BC.md.html">061  管理设计篇之服务网格.md</a>

                </li>
                <li>

                    
                    <a href="062%20%20%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1%E7%AF%87%E4%B9%8B%E7%BD%91%E5%85%B3%E6%A8%A1%E5%BC%8F.md.html">062  管理设计篇之网关模式.md</a>

                </li>
                <li>

                    
                    <a href="063%20%20%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1%E7%AF%87%E4%B9%8B%E9%83%A8%E7%BD%B2%E5%8D%87%E7%BA%A7%E7%AD%96%E7%95%A5.md.html">063  管理设计篇之部署升级策略.md</a>

                </li>
                <li>

                    
                    <a href="064%20%20%E6%80%A7%E8%83%BD%E8%AE%BE%E8%AE%A1%E7%AF%87%E4%B9%8B%E7%BC%93%E5%AD%98.md.html">064  性能设计篇之缓存.md</a>

                </li>
                <li>

                    
                    <a href="065%20%20%E6%80%A7%E8%83%BD%E8%AE%BE%E8%AE%A1%E7%AF%87%E4%B9%8B%E5%BC%82%E6%AD%A5%E5%A4%84%E7%90%86.md.html">065  性能设计篇之异步处理.md</a>

                </li>
                <li>

                    
                    <a href="066%20%20%E6%80%A7%E8%83%BD%E8%AE%BE%E8%AE%A1%E7%AF%87%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E6%89%A9%E5%B1%95.md.html">066  性能设计篇之数据库扩展.md</a>

                </li>
                <li>

                    
                    <a href="067%20%20%E6%80%A7%E8%83%BD%E8%AE%BE%E8%AE%A1%E7%AF%87%E4%B9%8B%E7%A7%92%E6%9D%80.md.html">067  性能设计篇之秒杀.md</a>

                </li>
                <li>

                    
                    <a href="068%20%20%E6%80%A7%E8%83%BD%E8%AE%BE%E8%AE%A1%E7%AF%87%E4%B9%8B%E8%BE%B9%E7%BC%98%E8%AE%A1%E7%AE%97.md.html">068  性能设计篇之边缘计算.md</a>

                </li>
                <li>

                    
                    <a href="069%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E7%BB%83%E7%BA%A7%E6%94%BB%E7%95%A5%EF%BC%882018%EF%BC%89%EF%BC%9A%E5%BC%80%E7%AF%87%E8%AF%8D.md.html">069  程序员练级攻略（2018）：开篇词.md</a>

                </li>
                <li>

                    
                    <a href="070%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E7%BB%83%E7%BA%A7%E6%94%BB%E7%95%A5%EF%BC%882018%EF%BC%89%EF%BC%9A%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%90%AF%E8%92%99.md.html">070  程序员练级攻略（2018）：零基础启蒙.md</a>

                </li>
                <li>

                    
                    <a href="071%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E7%BB%83%E7%BA%A7%E6%94%BB%E7%95%A5%EF%BC%882018%EF%BC%89%EF%BC%9A%E6%AD%A3%E5%BC%8F%E5%85%A5%E9%97%A8.md.html">071  程序员练级攻略（2018）：正式入门.md</a>

                </li>
                <li>

                    
                    <a href="072%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E7%BB%83%E7%BA%A7%E6%94%BB%E7%95%A5%EF%BC%882018%EF%BC%89%EF%BC%9A%E7%A8%8B%E5%BA%8F%E5%91%98%E4%BF%AE%E5%85%BB.md.html">072  程序员练级攻略（2018）：程序员修养.md</a>

                </li>
                <li>

                    
                    <a href="073%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E7%BB%83%E7%BA%A7%E6%94%BB%E7%95%A5%EF%BC%882018%EF%BC%89%EF%BC%9A%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80.md.html">073  程序员练级攻略（2018）：编程语言.md</a>

                </li>
                <li>

                    
                    <a href="074%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E7%BB%83%E7%BA%A7%E6%94%BB%E7%95%A5%EF%BC%9A%E7%90%86%E8%AE%BA%E5%AD%A6%E7%A7%91.md.html">074  程序员练级攻略：理论学科.md</a>

                </li>
                <li>

                    
                    <a href="075%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E7%BB%83%E7%BA%A7%E6%94%BB%E7%95%A5%EF%BC%882018%EF%BC%89%EF%BC%9A%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86.md.html">075  程序员练级攻略（2018）：系统知识.md</a>

                </li>
                <li>

                    
                    <a href="076%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E7%BB%83%E7%BA%A7%E6%94%BB%E7%95%A5%EF%BC%882018%EF%BC%89%EF%BC%9A%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1.md.html">076  程序员练级攻略（2018）：软件设计.md</a>

                </li>
                <li>

                    
                    <a href="077%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E7%BB%83%E7%BA%A7%E6%94%BB%E7%95%A5%EF%BC%882018%EF%BC%89%EF%BC%9ALinux%E7%B3%BB%E7%BB%9F%E3%80%81%E5%86%85%E5%AD%98%E5%92%8C%E7%BD%91%E7%BB%9C.md.html">077  程序员练级攻略（2018）：Linux系统、内存和网络.md</a>

                </li>
                <li>

                    
                    <a href="078%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E7%BB%83%E7%BA%A7%E6%94%BB%E7%95%A5%EF%BC%882018%EF%BC%89%EF%BC%9A%E5%BC%82%E6%AD%A5IO%E6%A8%A1%E5%9E%8B%E5%92%8CLock-Free%E7%BC%96%E7%A8%8B.md.html">078  程序员练级攻略（2018）：异步IO模型和Lock-Free编程.md</a>

                </li>
                <li>

                    
                    <a href="079%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E7%BB%83%E7%BA%A7%E6%94%BB%E7%95%A5%EF%BC%882018%EF%BC%89%EF%BC%9AJava%E5%BA%95%E5%B1%82%E7%9F%A5%E8%AF%86.md.html">079  程序员练级攻略（2018）：Java底层知识.md</a>

                </li>
                <li>

                    
                    <a href="080%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E7%BB%83%E7%BA%A7%E6%94%BB%E7%95%A5%EF%BC%882018%EF%BC%89%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93.md.html">080  程序员练级攻略（2018）：数据库.md</a>

                </li>
                <li>

                    
                    <a href="081%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E7%BB%83%E7%BA%A7%E6%94%BB%E7%95%A5%EF%BC%882018%EF%BC%89%EF%BC%9A%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84%E5%85%A5%E9%97%A8.md.html">081  程序员练级攻略（2018）：分布式架构入门.md</a>

                </li>
                <li>

                    
                    <a href="082%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E7%BB%83%E7%BA%A7%E6%94%BB%E7%95%A5%EF%BC%882018%EF%BC%89%EF%BC%9A%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84%E7%BB%8F%E5%85%B8%E5%9B%BE%E4%B9%A6%E5%92%8C%E8%AE%BA%E6%96%87.md.html">082  程序员练级攻略（2018）：分布式架构经典图书和论文.md</a>

                </li>
                <li>

                    
                    <a href="083%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E7%BB%83%E7%BA%A7%E6%94%BB%E7%95%A5%EF%BC%882018%EF%BC%89%EF%BC%9A%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84%E5%B7%A5%E7%A8%8B%E8%AE%BE%E8%AE%A1.md.html">083  程序员练级攻略（2018）：分布式架构工程设计.md</a>

                </li>
                <li>

                    
                    <a href="084%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E7%BB%83%E7%BA%A7%E6%94%BB%E7%95%A5%EF%BC%882018%EF%BC%89%EF%BC%9A%E5%BE%AE%E6%9C%8D%E5%8A%A1.md.html">084  程序员练级攻略（2018）：微服务.md</a>

                </li>
                <li>

                    
                    <a href="085%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E7%BB%83%E7%BA%A7%E6%94%BB%E7%95%A5%EF%BC%882018%EF%BC%89%EF%BC%9A%E5%AE%B9%E5%99%A8%E5%8C%96%E5%92%8C%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4.md.html">085  程序员练级攻略（2018）：容器化和自动化运维.md</a>

                </li>
                <li>

                    
                    <a href="086%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E7%BB%83%E7%BA%A7%E6%94%BB%E7%95%A5%EF%BC%882018%EF%BC%89%EF%BC%9A%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%92%8C%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD.md.html">086  程序员练级攻略（2018）：机器学习和人工智能.md</a>

                </li>
                <li>

                    
                    <a href="087%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E7%BB%83%E7%BA%A7%E6%94%BB%E7%95%A5%EF%BC%882018%EF%BC%89%EF%BC%9A%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E5%92%8C%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86.md.html">087  程序员练级攻略（2018）：前端基础和底层原理.md</a>

                </li>
                <li>

                    
                    <a href="088%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E7%BB%83%E7%BA%A7%E6%94%BB%E7%95%A5%EF%BC%882018%EF%BC%89%EF%BC%9A%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%92%8C%E6%A1%86%E6%9E%B6.md.html">088  程序员练级攻略（2018）：前端性能优化和框架.md</a>

                </li>
                <li>

                    
                    <a href="089%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E7%BB%83%E7%BA%A7%E6%94%BB%E7%95%A5%EF%BC%882018%EF%BC%89%EF%BC%9AUIUX%E8%AE%BE%E8%AE%A1.md.html">089  程序员练级攻略（2018）：UIUX设计.md</a>

                </li>
                <li>

                    
                    <a href="090%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E7%BB%83%E7%BA%A7%E6%94%BB%E7%95%A5%EF%BC%882018%EF%BC%89%EF%BC%9A%E6%8A%80%E6%9C%AF%E8%B5%84%E6%BA%90%E9%9B%86%E6%95%A3%E5%9C%B0.md.html">090  程序员练级攻略（2018）：技术资源集散地.md</a>

                </li>
                <li>

                    
                    <a href="091%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E9%9D%A2%E8%AF%95%E6%94%BB%E7%95%A5%EF%BC%9A%E9%9D%A2%E8%AF%95%E5%89%8D%E7%9A%84%E5%87%86%E5%A4%87.md.html">091  程序员面试攻略：面试前的准备.md</a>

                </li>
                <li>

                    
                    <a href="092%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E9%9D%A2%E8%AF%95%E6%94%BB%E7%95%A5%EF%BC%9A%E9%9D%A2%E8%AF%95%E4%B8%AD%E7%9A%84%E6%8A%80%E5%B7%A7.md.html">092  程序员面试攻略：面试中的技巧.md</a>

                </li>
                <li>

                    
                    <a href="093%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E9%9D%A2%E8%AF%95%E6%94%BB%E7%95%A5%EF%BC%9A%E9%9D%A2%E8%AF%95%E9%A3%8E%E6%A0%BC.md.html">093  程序员面试攻略：面试风格.md</a>

                </li>
                <li>

                    
                    <a href="094%20%20%E7%A8%8B%E5%BA%8F%E5%91%98%E9%9D%A2%E8%AF%95%E6%94%BB%E7%95%A5%EF%BC%9A%E5%AE%9E%E5%8A%9B%E6%89%8D%E6%98%AF%E7%8E%8B%E4%B8%AD%E7%8E%8B.md.html">094  程序员面试攻略：实力才是王中王.md</a>

                </li>
                <li>

                    
                    <a href="095%20%20%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%EF%BC%9A%E7%AB%AF%E6%AD%A3%E5%AD%A6%E4%B9%A0%E6%80%81%E5%BA%A6.md.html">095  高效学习：端正学习态度.md</a>

                </li>
                <li>

                    
                    <a href="096%20%20%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%EF%BC%9A%E6%BA%90%E5%A4%B4%E3%80%81%E5%8E%9F%E7%90%86%E5%92%8C%E7%9F%A5%E8%AF%86%E5%9C%B0%E5%9B%BE.md.html">096  高效学习：源头、原理和知识地图.md</a>

                </li>
                <li>

                    
                    <a href="097%20%20%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%EF%BC%9A%E6%B7%B1%E5%BA%A6%EF%BC%8C%E5%BD%92%E7%BA%B3%E5%92%8C%E5%9D%9A%E6%8C%81%E5%AE%9E%E8%B7%B5.md.html">097  高效学习：深度，归纳和坚持实践.md</a>

                </li>
                <li>

                    
                    <a href="098%20%20%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%EF%BC%9A%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0%E5%92%8C%E9%98%85%E8%AF%BB%E4%BB%A3%E7%A0%81.md.html">098  高效学习：如何学习和阅读代码.md</a>

                </li>
                <li>

                    
                    <a href="099%20%20%E9%AB%98%E6%95%88%E5%AD%A6%E4%B9%A0%EF%BC%9A%E9%9D%A2%E5%AF%B9%E6%9E%AF%E7%87%A5%E5%92%8C%E9%87%8F%E5%A4%A7%E7%9A%84%E7%9F%A5%E8%AF%86.md.html">099  高效学习：面对枯燥和量大的知识.md</a>

                </li>
                <li>

                    
                    <a href="100%20%20%E9%AB%98%E6%95%88%E6%B2%9F%E9%80%9A%EF%BC%9ATalk%E5%92%8CCode%E5%90%8C%E7%AD%89%E9%87%8D%E8%A6%81.md.html">100  高效沟通：Talk和Code同等重要.md</a>

                </li>
                <li>

                    
                    <a href="101%20%20%E9%AB%98%E6%95%88%E6%B2%9F%E9%80%9A%EF%BC%9A%E6%B2%9F%E9%80%9A%E9%98%BB%E7%A2%8D%E5%92%8C%E5%BA%94%E5%AF%B9%E6%96%B9%E6%B3%95.md.html">101  高效沟通：沟通阻碍和应对方法.md</a>

                </li>
                <li>

                    
                    <a href="102%20%20%E9%AB%98%E6%95%88%E6%B2%9F%E9%80%9A%EF%BC%9A%E6%B2%9F%E9%80%9A%E6%96%B9%E5%BC%8F%E5%8F%8A%E6%8A%80%E5%B7%A7.md.html">102  高效沟通：沟通方式及技巧.md</a>

                </li>
                <li>

                    
                    <a href="103%20%20%E9%AB%98%E6%95%88%E6%B2%9F%E9%80%9A%EF%BC%9A%E6%B2%9F%E9%80%9A%E6%8A%80%E6%9C%AF.md.html">103  高效沟通：沟通技术.md</a>

                </li>
                <li>

                    
                    <a href="104%20%20%E9%AB%98%E6%95%88%E6%B2%9F%E9%80%9A%EF%BC%9A%E5%A5%BD%E8%80%81%E6%9D%BF%E8%A6%81%E5%96%84%E4%BA%8E%E6%8F%90%E9%97%AE.md.html">104  高效沟通：好老板要善于提问.md</a>

                </li>
                <li>

                    
                    <a href="105%20%20%E9%AB%98%E6%95%88%E6%B2%9F%E9%80%9A%EF%BC%9A%E5%A5%BD%E5%A5%BD%E8%AF%B4%E8%AF%9D%E7%9A%84%E8%89%BA%E6%9C%AF.md.html">105  高效沟通：好好说话的艺术.md</a>

                </li>
                <li>

                    
                    <a href="106%20%E5%8A%A0%E9%A4%90%20%20%E8%B0%88%E8%B0%88%E6%88%91%E7%9A%84%E2%80%9C%E4%B8%89%E8%A7%82%E2%80%9D.md.html">106 加餐  谈谈我的“三观”.md</a>

                </li>
                <li>

                    
                    <a href="107%20%E7%BB%93%E6%9D%9F%E8%AF%AD%20%20%E4%B8%9A%E7%B2%BE%E4%BA%8E%E5%8B%A4%EF%BC%8C%E8%A1%8C%E6%88%90%E4%BA%8E%E6%80%9D.md.html">107 结束语  业精于勤，行成于思.md</a>

                </li>
            </ul>

        </div>
    </div>

    <div class="sidebar-toggle" onclick="sidebar_toggle()" onmouseover="add_inner()" onmouseleave="remove_inner()">
        <div class="sidebar-toggle-inner"></div>
    </div>

    <script>
        function add_inner() {
            let inner = document.querySelector('.sidebar-toggle-inner')
            inner.classList.add('show')
        }

        function remove_inner() {
            let inner = document.querySelector('.sidebar-toggle-inner')
            inner.classList.remove('show')
        }

        function sidebar_toggle() {
            let sidebar_toggle = document.querySelector('.sidebar-toggle')
            let sidebar = document.querySelector('.book-sidebar')
            let content = document.querySelector('.off-canvas-content')
            if (sidebar_toggle.classList.contains('extend')) { // show
                sidebar_toggle.classList.remove('extend')
                sidebar.classList.remove('hide')
                content.classList.remove('extend')
            } else { // hide
                sidebar_toggle.classList.add('extend')
                sidebar.classList.add('hide')
                content.classList.add('extend')
            }
        }


function open_sidebar() {
    let sidebar = document.querySelector('.book-sidebar')
    let overlay = document.querySelector('.off-canvas-overlay')
    sidebar.classList.add('show')
    overlay.classList.add('show')
}
function hide_canvas() {
    let sidebar = document.querySelector('.book-sidebar')
    let overlay = document.querySelector('.off-canvas-overlay')
    sidebar.classList.remove('show')
    overlay.classList.remove('show')
}

    </script>

    <div class="off-canvas-content">
        <div class="columns">
            <div class="column col-12 col-lg-12">
                <div class="book-navbar">
                    <!-- For Responsive Layout -->
                    <header class="navbar">
                        <section class="navbar-section">
                            <a onclick="open_sidebar()">
                                <i class="icon icon-menu"></i>
                            </a>
                        </section>
                    </header>
                </div>
                <div class="book-content" style="max-width: 960px; margin: 0 auto;
    overflow-x: auto;
    overflow-y: hidden;">
                    <div class="book-post">
                        <p id="tip" align="center"></p>
                        <div><h1>034  编程范式游记（5）- 修饰器模式</h1>
<p>在上一篇文章中，我们领略了函数式编程的趣味和魅力，主要讲了函数式编程的主要技术。还记得有哪些吗？递归、Map、Reduce、Filter 等，并利用 Python 的 Decorator 和 Generator 功能，将多个函数组合成了管道。</p>
<p>此时，你心中可能会有个疑问，这个 decorator 又是怎样工作的呢？这就是本文中要讲述的内容，“Decorator 模式”，又叫“修饰器模式”，或是“装饰器模式”。</p>
<h1>Python 的 Decorator</h1>
<p>Python 的 Decorator 在使用上和 Java 的 Annotation（以及 C# 的 Attribute）很相似，就是在方法名前面加一个 @XXX 注解来为这个方法装饰一些东西。但是，Java/C# 的 Annotation 也很让人望而却步，太过于复杂了。你要玩它，需要先了解一堆 Annotation 的类库文档，感觉几乎就是在学另外一门语言。</p>
<p>而 Python 使用了一种相对于 Decorator Pattern 和 Annotation 来说非常优雅的方法，这种方法不需要你去掌握什么复杂的 OO 模型或是 Annotation 的各种类库规定，完全就是语言层面的玩法：一种函数式编程的技巧。</p>
<p>这是我最喜欢的一个模式了，也是一个挺好玩儿的东西，这个模式动用了函数式编程的一个技术——用一个函数来构造另一个函数。</p>
<p>好了，我们先来点感性认识，看一个 Python 修饰器的 Hello World 代码。</p>
<pre><code>def hello(fn):
    def wrapper():
        print &quot;hello, %s&quot; % fn.__name__
        fn()
        print &quot;goodbye, %s&quot; % fn.__name__
    return wrapper
 
@hello
def Hao():
    print &quot;i am Hao Chen&quot;
 
Hao()
</code></pre>
<p>代码的执行结果如下：</p>
<pre><code>$ python hello.py
hello, Hao
i am Hao Chen
goodbye, Hao
</code></pre>
<p>你可以看到如下的东西：</p>
<ol>
<li>函数 <code>Hao</code> 前面有个 @hello 的“注解”，<code>hello</code> 就是我们前面定义的函数 <code>hello</code>；</li>
<li>在 <code>hello</code> 函数中，其需要一个 <code>fn</code> 的参数（这就是用来做回调的函数）；</li>
<li>hello 函数中返回了一个 inner 函数 <code>wrapper</code>，这个 <code>wrapper</code>函数回调了传进来的 <code>fn</code>，并在回调前后加了两条语句。</li>
</ol>
<p>对于 Python 的这个 @注解语法糖（syntactic sugar）来说，当你在用某个 @decorator 来修饰某个函数 <code>func</code> 时，如下所示:</p>
<pre><code>@decorator
def func():
    pass
</code></pre>
<p>其解释器会解释成下面这样的语句：</p>
<pre><code>func = decorator(func)

</code></pre>
<p>嘿！这不就是把一个函数当参数传到另一个函数中，然后再回调吗？是的。但是，我们需要注意，那里还有一个赋值语句，把 decorator 这个函数的返回值赋值回了原来的 <code>func</code>。</p>
<p>我们再来看一个带参数的玩法：</p>
<pre><code>def makeHtmlTag(tag, *args, **kwds):
    def real_decorator(fn):
        css_class = &quot; class='{0}'&quot;.format(kwds[&quot;css_class&quot;]) \
                                     if &quot;css_class&quot; in kwds else &quot;&quot;
        def wrapped(*args, **kwds):
            return &quot;&lt;&quot;+tag+css_class+&quot;&gt;&quot; + fn(*args, **kwds) + &quot;&lt;/&quot;+tag+&quot;&gt;&quot;
        return wrapped
    return real_decorator
 
@makeHtmlTag(tag=&quot;b&quot;, css_class=&quot;bold_css&quot;)
@makeHtmlTag(tag=&quot;i&quot;, css_class=&quot;italic_css&quot;)
def hello():
    return &quot;hello world&quot;
 
print hello()
 
# 输出：
# &lt;b class='bold_css'&gt;&lt;i class='italic_css'&gt;hello world&lt;/i&gt;&lt;/b&gt;
</code></pre>
<p>在上面这个例子中，我们可以看到：<code>makeHtmlTag</code>有两个参数。所以，为了让 <code>hello = makeHtmlTag(arg1, arg2)(hello)</code> 成功， <code>makeHtmlTag</code> 必需返回一个 decorator（这就是为什么我们在 <code>makeHtmlTag</code> 中加入了 <code>real_decorator()</code>）。</p>
<p>这样一来，我们就可以进入到 decorator 的逻辑中去了——decorator 得返回一个 wrapper，wrapper 里回调 <code>hello</code>。看似那个 <code>makeHtmlTag()</code> 写得层层叠叠，但是，已经了解了本质的我们觉得写得很自然。</p>
<p>我们再来看一个为其它函数加缓存的示例:</p>
<pre><code>from functools import wraps
def memoization(fn):
    cache = {}
    miss = object()
 
    @wraps(fn)
    def wrapper(*args):
        result = cache.get(args, miss)
        if result is miss:
            result = fn(*args)
            cache[args] = result
        return result
 
    return wrapper
 
@memoization
def fib(n):
    if n &lt; 2:
        return n
    return fib(n - 1) + fib(n - 2)
</code></pre>
<p>上面这个例子中，是一个斐波那契数例的递归算法。我们知道，这个递归是相当没有效率的，因为会重复调用。比如：我们要计算 fib(5)，于是其分解成 <code>fib(4) + fib(3)</code>，而 <code>fib(4)</code> 分解成 <code>fib(3) + fib(2)</code>，<code>fib(3)</code> 又分解成<code>fib(2) + fib(1)</code>……你可看到，基本上来说，<code>fib(3)</code>, <code>fib(2)</code>, <code>fib(1)</code>在整个递归过程中被调用了至少两次。</p>
<p>而我们用 decorator，在调用函数前查询一下缓存，如果没有才调用，有了就从缓存中返回值。一下子，这个递归从二叉树式的递归成了线性的递归。<code>wraps</code> 的作用是保证 <code>fib</code> 的函数名不被 <code>wrapper</code> 所取代。</p>
<p>除此之外，Python 还支持类方式的 decorator。</p>
<pre><code>class myDecorator(object):
    def __init__(self, fn):
        print &quot;inside myDecorator.__init__()&quot;
        self.fn = fn
 
    def __call__(self):
        self.fn()
        print &quot;inside myDecorator.__call__()&quot;
 
@myDecorator
def aFunction():
    print &quot;inside aFunction()&quot;
 
print &quot;Finished decorating aFunction()&quot;
 
aFunction()
 
# 输出：
# inside myDecorator.__init__()
# Finished decorating aFunction()
# inside aFunction()
# inside myDecorator.__call__()
</code></pre>
<p>上面这个示例展示了，用类的方式声明一个 decorator。我们可以看到这个类中有两个成员：</p>
<ol>
<li>一个是<code>__init__()</code>，这个方法是在我们给某个函数 decorate 时被调用，所以，需要有一个 <code>fn</code> 的参数，也就是被 decorate 的函数。</li>
<li>一个是<code>__call__()</code>，这个方法是在我们调用被 decorate 的函数时被调用的。</li>
</ol>
<p>从上面的输出中，可以看到整个程序的执行顺序。这看上去要比“函数式”的方式更易读一些。</p>
<p>我们来看一个实际点的例子。下面这个示例展示了通过 URL 的路由来调用相关注册的函数示例：</p>
<pre><code>class MyApp():
    def __init__(self):
        self.func_map = {}
 
    def register(self, name):
        def func_wrapper(func):
            self.func_map[name] = func
            return func
        return func_wrapper
 
    def call_method(self, name=None):
        func = self.func_map.get(name, None)
        if func is None:
            raise Exception(&quot;No function registered against - &quot; + str(name))
        return func()
 
app = MyApp()
 
@app.register('/')
def main_page_func():
    return &quot;This is the main page.&quot;
 
@app.register('/next_page')
def next_page_func():
    return &quot;This is the next page.&quot;
 
print app.call_method('/')
print app.call_method('/next_page')
</code></pre>
<p>注意：上面这个示例中 decorator 类不是真正的 decorator，其中也没有<code>__call__()</code>，并且，wrapper 返回了原函数。所以，原函数没有发生任何变化。</p>
<h1>Go 语言的 Decorator</h1>
<p>Python 有语法糖，所以写出来的代码比较酷。但是对于没有修饰器语法糖这类语言，写出来的代码会是怎么样的？我们来看一下 Go 语言的代码。</p>
<p>还是从一个 Hello World 开始。</p>
<pre><code>package main
 
import &quot;fmt&quot;
 
func decorator(f func(s string)) func(s string) {
    return func(s string) {
        fmt.Println(&quot;Started&quot;)
        f(s)
        fmt.Println(&quot;Done&quot;)
    }
}
 
func Hello(s string) {
    fmt.Println(s)
}
 
func main() {
    decorator(Hello)(&quot;Hello, World!&quot;)
}
</code></pre>
<p>可以看到，我们动用了一个高阶函数 <code>decorator()</code>，在调用的时候，先把 <code>Hello()</code> 函数传进去，然后其返回一个匿名函数。这个匿名函数中除了运行了自己的代码，也调用了被传入的 <code>Hello()</code> 函数。</p>
<p>这个玩法和 Python 的异曲同工，只不过，Go 并不支持像 Python 那样的 @decorator 语法糖。所以，在调用上有些难看。当然，如果要想让代码容易读一些，你可以这样：</p>
<pre><code>hello := decorator(Hello)
hello(&quot;Hello&quot;)
</code></pre>
<p>我们再来看一个为函数 log 消耗时间的例子：</p>
<pre><code>type SumFunc func(int64, int64) int64
 
func getFunctionName(i interface{}) string {
    return runtime.FuncForPC(reflect.ValueOf(i).Pointer()).Name()
}
 
func timedSumFunc(f SumFunc) SumFunc {
    return func(start, end int64) int64 {
        defer func(t time.Time) {
            fmt.Printf(&quot;--- Time Elapsed (%s): %v ---\n&quot;, 
                getFunctionName(f), time.Since(t))
        }(time.Now())
        return f(start, end)
    }
}
 
func Sum1(start, end int64) int64 {
    var sum int64
    sum = 0
    if start &gt; end {
        start, end = end, start
    }
    for i := start; i &lt;= end; i++ {
        sum += i
    }
    return sum
}
 
func Sum2(start, end int64) int64 {
    if start &gt; end {
        start, end = end, start
    }
    return (end - start + 1) * (end + start) / 2
}
 
func main() {
 
    sum1 := timedSumFunc(Sum1)
    sum2 := timedSumFunc(Sum2)
 
    fmt.Printf(&quot;%d, %d\n&quot;, sum1(-10000, 10000000), sum2(-10000, 10000000))
}
</code></pre>
<p>关于上面的代码：</p>
<ul>
<li>有两个 Sum 函数，<code>Sum1()</code> 函数就是简单地做个循环，<code>Sum2()</code> 函数动用了数据公式。（注意：<code>start</code> 和 <code>end</code> 有可能有负数的情况。）</li>
<li>代码中使用了 Go 语言的反射机制来获取函数名。</li>
<li>修饰器函数是 <code>timedSumFunc()</code>。</li>
</ul>
<p>再来看一个 HTTP 路由的例子：</p>
<pre><code>func WithServerHeader(h http.HandlerFunc) http.HandlerFunc {
    return func(w http.ResponseWriter, r *http.Request) {
        log.Println(&quot;---&gt;WithServerHeader()&quot;)
        w.Header().Set(&quot;Server&quot;, &quot;HelloServer v0.0.1&quot;)
        h(w, r)
    }
}
 
func WithAuthCookie(h http.HandlerFunc) http.HandlerFunc {
    return func(w http.ResponseWriter, r *http.Request) {
        log.Println(&quot;---&gt;WithAuthCookie()&quot;)
        cookie := &amp;http.Cookie{Name: &quot;Auth&quot;, Value: &quot;Pass&quot;, Path: &quot;/&quot;}
        http.SetCookie(w, cookie)
        h(w, r)
    }
}
 
func WithBasicAuth(h http.HandlerFunc) http.HandlerFunc {
    return func(w http.ResponseWriter, r *http.Request) {
        log.Println(&quot;---&gt;WithBasicAuth()&quot;)
        cookie, err := r.Cookie(&quot;Auth&quot;)
        if err != nil || cookie.Value != &quot;Pass&quot; {
            w.WriteHeader(http.StatusForbidden)
            return
        }
        h(w, r)
    }
}
 
func WithDebugLog(h http.HandlerFunc) http.HandlerFunc {
    return func(w http.ResponseWriter, r *http.Request) {
        log.Println(&quot;---&gt;WithDebugLog&quot;)
        r.ParseForm()
        log.Println(r.Form)
        log.Println(&quot;path&quot;, r.URL.Path)
        log.Println(&quot;scheme&quot;, r.URL.Scheme)
        log.Println(r.Form[&quot;url_long&quot;])
        for k, v := range r.Form {
            log.Println(&quot;key:&quot;, k)
            log.Println(&quot;val:&quot;, strings.Join(v, &quot;&quot;))
        }
        h(w, r)
    }
}
func hello(w http.ResponseWriter, r *http.Request) {
    log.Printf(&quot;Received Request %s from %s\n&quot;, r.URL.Path, r.RemoteAddr)
    fmt.Fprintf(w, &quot;Hello, World! &quot;+r.URL.Path)
}
</code></pre>
<p>上面的代码中，我们写了多个函数。有写 HTTP 响应头的，有写认证 Cookie 的，有检查认证 Cookie 的，有打日志的……在使用过程中，我们可以把其嵌套起来使用，在修饰过的函数上继续修饰，这样就可以拼装出更复杂的功能。</p>
<pre><code>func main() {
    http.HandleFunc(&quot;/v1/hello&quot;, WithServerHeader(WithAuthCookie(hello)))
    http.HandleFunc(&quot;/v2/hello&quot;, WithServerHeader(WithBasicAuth(hello)))
    http.HandleFunc(&quot;/v3/hello&quot;, WithServerHeader(WithBasicAuth(WithDebugLog(hello))))
    err := http.ListenAndServe(&quot;:8080&quot;, nil)
    if err != nil {
        log.Fatal(&quot;ListenAndServe: &quot;, err)
    }
}
</code></pre>
<p>当然，如果一层套一层不好看的话，我们可以使用 pipeline 的玩法——我们需要先写一个工具函数——用来遍历并调用各个 decorator：</p>
<pre><code>type HttpHandlerDecorator func(http.HandlerFunc) http.HandlerFunc
 
func Handler(h http.HandlerFunc, decors ...HttpHandlerDecorator) http.HandlerFunc {
    for i := range decors {
        d := decors[len(decors)-1-i] // iterate in reverse
        h = d(h)
    }
    return h
}
</code></pre>
<p>然后，我们就可以像下面这样使用了。</p>
<pre><code>http.HandleFunc(&quot;/v4/hello&quot;, Handler(hello,
                WithServerHeader, WithBasicAuth, WithDebugLog))
</code></pre>
<p>这样的代码是不是更易读了一些？pipeline 的功能也就出来了。</p>
<p>不过，对于 Go 的修饰器模式，还有一个小问题——好像无法做到泛型，就像上面那个计算时间的函数一样，其代码耦合了需要被修饰的函数的接口类型，无法做到非常通用。如果这个事解决不了，那么，这个修饰器模式还是有点不好用的。</p>
<p>因为 Go 语言不像 Python 和 Java，Python 是动态语言，而 Java 有语言虚拟机，所以它们可以干好些比较变态的事，然而 Go 语言是一个静态的语言，这意味着其类型需要在编译时就要搞定，否则无法编译。不过，Go 语言支持的最大的泛型是 interface{}，还有比较简单的 reflection 机制，在上面做做文章，应该还是可以搞定的。</p>
<p>废话不说，下面是我用 reflection 机制写的一个比较通用的修饰器（为了便于阅读，我删除了出错判断代码）。</p>
<pre><code>func Decorator(decoPtr, fn interface{}) (err error) {
    var decoratedFunc, targetFunc reflect.Value
 
    decoratedFunc = reflect.ValueOf(decoPtr).Elem()
    targetFunc = reflect.ValueOf(fn)
 
    v := reflect.MakeFunc(targetFunc.Type(),
        func(in []reflect.Value) (out []reflect.Value) {
            fmt.Println(&quot;before&quot;)
            out = targetFunc.Call(in)
            fmt.Println(&quot;after&quot;)
            return
        })
 
    decoratedFunc.Set(v)
    return
}
</code></pre>
<p>上面的代码动用了 <code>reflect.MakeFunc()</code> 函数制作出了一个新的函数。其中的 <code>targetFunc.Call(in)</code> 调用了被修饰的函数。关于 Go 语言的反射机制，推荐官方文章——《<a href="https://blog.golang.org/laws-of-reflection">The Laws of Reflection</a>》，在这里我不多说了。</p>
<p>上面这个 <code>Decorator()</code> 需要两个参数：</p>
<ul>
<li>第一个是出参 <code>decoPtr</code> ，就是完成修饰后的函数。</li>
<li>第二个是入参 <code>fn</code> ，就是需要修饰的函数。</li>
</ul>
<p>这样写是不是有些二？的确是的。不过，这是我个人在 Go 语言里所能写出来的最好的代码了。如果你知道更优雅的写法，请你一定告诉我！</p>
<p>好的，让我们来看一下使用效果。首先，假设我们有两个需要修饰的函数：</p>
<pre><code>func foo(a, b, c int) int {
    fmt.Printf(&quot;%d, %d, %d \n&quot;, a, b, c)
    return a + b + c
}
 
func bar(a, b string) string {
    fmt.Printf(&quot;%s, %s \n&quot;, a, b)
    return a + b
}
</code></pre>
<p>然后，我们可以这样做：</p>
<pre><code>type MyFoo func(int, int, int) int
var myfoo MyFoo
Decorator(&amp;myfoo, foo)
myfoo(1, 2, 3)
</code></pre>
<p>你会发现，使用 <code>Decorator()</code> 时，还需要先声明一个函数签名，感觉好傻啊。一点都不泛型，不是吗？谁叫这是有类型的静态编译的语言呢？</p>
<p>嗯。如果你不想声明函数签名，那么也可以这样：</p>
<pre><code>mybar := bar
Decorator(&amp;mybar, bar)
mybar(&quot;hello,&quot;, &quot;world!&quot;)
</code></pre>
<p>好吧，看上去不是那么的漂亮，但是 it works。看样子 Go 语言目前本身的特性无法做成像 Java 或 Python 那样，对此，我们只能多求 Go 语言多放糖了！</p>
<h1>小结</h1>
<p>好了，讲了那么多的例子，看了那么多的代码，我估计你可能有点晕，让我们来做个小结吧。</p>
<p>通过上面 Python 和 Go 修饰器的例子，我们可以看到，所谓的修饰器模式其实是在做下面的几件事。</p>
<ul>
<li>表面上看，修饰器模式就是扩展现有的一个函数的功能，让它可以干一些其他的事，或是在现有的函数功能上再附加上一些别的功能。</li>
<li>除了我们可以感受到<strong>函数式编程</strong>下的代码扩展能力，我们还能感受到函数的互相和随意拼装带来的好处。</li>
<li>但是深入一下，我们不难发现，Decorator 这个函数其实是可以修饰几乎所有的函数的。于是，这种可以通用于其它函数的编程方式，可以很容易地将一些非业务功能的、属于控制类型的代码给抽象出来（所谓的控制类型的代码就是像 for-loop，或是打日志，或是函数路由，或是求函数运行时间之类的非业务功能性的代码）。</li>
</ul>
</div>
                    </div>
                    <div>
                        <div style="float: left">
                            <a href="033%20%20%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F%E6%B8%B8%E8%AE%B0%EF%BC%884%EF%BC%89-%20%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.md.html">上一页</a>
                        </div>
                        <div style="float: right">
                            <a href="035%20%20%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F%E6%B8%B8%E8%AE%B0%EF%BC%886%EF%BC%89-%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B.md.html">下一页</a>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <a class="off-canvas-overlay" onclick="hide_canvas()"></a>
</div>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/v652eace1692a40cfa3763df669d7439c1639079717194" integrity="sha512-Gi7xpJR8tSkrpF7aordPZQlW2DLtzUlZcumS8dMQjwDHEnw9I7ZLyiOj/6tZStRBGtGgN6ceN6cMH8z7etPGlw==" data-cf-beacon='{"rayId":"7123574fec9889b3","version":"2021.12.0","r":1,"token":"1f5d475227ce4f0089a7cff1ab17c0f5","si":100}' crossorigin="anonymous"></script>
</body>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NPSEEVD756"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', 'G-NPSEEVD756');
    var path = window.location.pathname
    var cookie = getCookie("lastPath");
    console.log(path)
    if (path.replace("/", "") === "") {
        if (cookie.replace("/", "") !== "") {
            console.log(cookie)
            document.getElementById("tip").innerHTML = "<a href='" + cookie + "'>跳转到上次进度</a>"
        }
    } else {
        setCookie("lastPath", path)
    }

    function setCookie(cname, cvalue) {
        var d = new Date();
        d.setTime(d.getTime() + (180 * 24 * 60 * 60 * 1000));
        var expires = "expires=" + d.toGMTString();
        document.cookie = cname + "=" + cvalue + "; " + expires + ";path = /";
    }

    function getCookie(cname) {
        var name = cname + "=";
        var ca = document.cookie.split(';');
        for (var i = 0; i < ca.length; i++) {
            var c = ca[i].trim();
            if (c.indexOf(name) === 0) return c.substring(name.length, c.length);
        }
        return "";
    }

</script>

</html>
